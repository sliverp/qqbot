---
name: qqbot-cron
description: QQ Bot æ™ºèƒ½æé†’æŠ€èƒ½ã€‚æ”¯æŒä¸€æ¬¡æ€§æé†’ã€å‘¨æœŸæ€§ä»»åŠ¡ã€è‡ªåŠ¨é™çº§ç¡®ä¿é€è¾¾ã€‚å¯è®¾ç½®ã€æŸ¥è¯¢ã€å–æ¶ˆæé†’ã€‚
metadata: {"clawdbot":{"emoji":"â°"}}
---

# QQ Bot æ™ºèƒ½æé†’

è®© AI å¸®ç”¨æˆ·è®¾ç½®ã€ç®¡ç†å®šæ—¶æé†’ï¼Œæ”¯æŒç§èŠå’Œç¾¤èŠã€‚

---

## â›” æœ€é‡è¦çš„ä¸€æ¡è§„åˆ™ï¼ˆè¯»ä¸‰éï¼‰

> **è°ƒç”¨ cron å·¥å…·æ—¶ï¼Œpayload.kind å¿…é¡»æ˜¯ `"agentTurn"`ã€‚ç»å¯¹ä¸èƒ½ç”¨ `"systemEvent"`ï¼**
>
> `systemEvent` åªä¼šåœ¨ AI ä¼šè¯é‡Œæ’å…¥ä¸€æ¡æ–‡æœ¬ï¼Œç”¨æˆ·æ ¹æœ¬æ”¶ä¸åˆ° QQ æ¶ˆæ¯ã€‚
> åªæœ‰ `agentTurn` + `deliver: true` + `channel: "qqbot"` + `to` æ‰èƒ½çœŸæ­£æŠŠæ¶ˆæ¯å‘åˆ° QQã€‚

---

## ğŸ¤– AI å†³ç­–æŒ‡å—

### æ—¶é—´ç¡®è®¤è§„åˆ™

> è®¾ç½®æé†’å‰ï¼Œå…ˆç¡®è®¤å½“å‰ç³»ç»Ÿæ—¶é—´ï¼ˆæŸ¥çœ‹ä¸Šä¸‹æ–‡ä¸­çš„æ—¶é—´ä¿¡æ¯ï¼Œæˆ–æ‰§è¡Œ `date`ï¼‰ã€‚
> çº¯ç›¸å¯¹æ—¶é—´ï¼ˆ"5åˆ†é’Ÿå"ã€"1å°æ—¶å"ï¼‰å¯ä»¥è·³è¿‡ç¡®è®¤ï¼Œç›´æ¥ç®— `Date.now() + å»¶è¿Ÿæ¯«ç§’`ã€‚

### ç”¨æˆ·æ„å›¾è¯†åˆ«

| ç”¨æˆ·è¯´æ³• | æ„å›¾ | cron å·¥å…· action |
|----------|------|------------------|
| "5åˆ†é’Ÿåæé†’æˆ‘å–æ°´" | åˆ›å»ºä¸€æ¬¡æ€§æé†’ | `add`ï¼ˆschedule.kind=atï¼‰ |
| "æ¯å¤©8ç‚¹æé†’æˆ‘æ‰“å¡" | åˆ›å»ºå‘¨æœŸæé†’ | `add`ï¼ˆschedule.kind=cronï¼‰ |
| "æˆ‘æœ‰å“ªäº›æé†’" | æŸ¥è¯¢ | `list` |
| "å–æ¶ˆå–æ°´æé†’" | åˆ é™¤ | `remove` |
| "ä¿®æ”¹æé†’æ—¶é—´" | åˆ é™¤+é‡å»º | `remove` â†’ `add` |
| "æé†’æˆ‘" (æ— æ—¶é—´) | **éœ€è¿½é—®** | è¯¢é—®å…·ä½“æ—¶é—´ |

### å¿…é¡»è¿½é—®çš„æƒ…å†µ

1. **æ²¡æœ‰æ—¶é—´**ï¼š"æé†’æˆ‘å–æ°´" â†’ "è¯·é—®ä»€ä¹ˆæ—¶å€™æé†’ä½ ï¼Ÿ"
2. **æ—¶é—´æ¨¡ç³Š**ï¼š"æ™šç‚¹æé†’æˆ‘" â†’ "å…·ä½“å‡ ç‚¹å‘¢ï¼Ÿ"
3. **å‘¨æœŸä¸æ˜**ï¼š"å®šæœŸæé†’æˆ‘" â†’ "å¤šä¹…ä¸€æ¬¡ï¼Ÿæ¯å¤©ï¼Ÿæ¯å‘¨ï¼Ÿ"

---

## ğŸ“‹ åˆ›å»ºæé†’ï¼ˆæœ€é‡è¦ï¼‰

### ğŸš¨ğŸš¨ğŸš¨ å·¥å…·è°ƒç”¨å‚æ•°æ¨¡æ¿ï¼ˆAI å¿…é¡»ä¸¥æ ¼éµå¾ªï¼‰

> **AI è°ƒç”¨ cron å·¥å…·æ—¶ï¼Œä¼ çš„æ˜¯ JSON å‚æ•°ï¼Œä¸æ˜¯ CLI å‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯å”¯ä¸€æ­£ç¡®çš„ JSON æ ¼å¼ï¼š**

**ä¸€æ¬¡æ€§æé†’ï¼ˆN åˆ†é’Ÿåï¼‰**ï¼š
```json
{
  "action": "add",
  "job": {
    "name": "{ä»»åŠ¡å}",
    "schedule": {
      "kind": "at",
      "atMs": {å½“å‰æ—¶é—´æˆ³æ¯«ç§’ + Nåˆ†é’Ÿ*60000}
    },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "deleteAfterRun": true,
    "payload": {
      "kind": "agentTurn",
      "message": "ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼š{æé†’å†…å®¹}ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```

**å‘¨æœŸæé†’ï¼ˆæ¯å¤©/æ¯å‘¨ï¼‰**ï¼š
```json
{
  "action": "add",
  "job": {
    "name": "{ä»»åŠ¡å}",
    "schedule": {
      "kind": "cron",
      "expr": "0 8 * * *",
      "tz": "Asia/Shanghai"
    },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "payload": {
      "kind": "agentTurn",
      "message": "ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼š{æé†’å†…å®¹}ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```

> ğŸš¨ **ç»å¯¹ä¸å¯æ›´æ”¹çš„ 5 ä¸ªå­—æ®µ**ï¼ˆæ”¹äº†æé†’å°±åºŸäº†ï¼‰ï¼š
> 1. `payload.kind` å¿…é¡»æ˜¯ `"agentTurn"` â€” âŒ ç»å¯¹ä¸èƒ½ç”¨ `"systemEvent"`
> 2. `payload.deliver` å¿…é¡»æ˜¯ `true`
> 3. `payload.channel` å¿…é¡»æ˜¯ `"qqbot"`
> 4. `payload.to` å¿…é¡»æ˜¯ç”¨æˆ·çš„ openid
> 5. `sessionTarget` å¿…é¡»æ˜¯ `"isolated"`
>
> ğŸš« **`payload.kind: "systemEvent"` åªä¼šåœ¨ AI ä¼šè¯ä¸­æ³¨å…¥æ–‡æœ¬ï¼Œä¸ä¼šå‘é€ QQ æ¶ˆæ¯ç»™ç”¨æˆ·ï¼**
>
> âš ï¸ **`schedule.atMs` å¿…é¡»æ˜¯ç»å¯¹æ¯«ç§’æ—¶é—´æˆ³**ï¼ˆå¦‚ `1770733800000`ï¼‰ï¼Œä¸æ”¯æŒç›¸å¯¹æ—¶é—´å­—ç¬¦ä¸²å¦‚ `"5m"`ï¼
> éœ€è¦è‡ªè¡Œè®¡ç®—ï¼š`å½“å‰æ—¶é—´æˆ³ + å»¶è¿Ÿæ¯«ç§’æ•°`ã€‚ä¾‹å¦‚ 5 åˆ†é’Ÿå = `Date.now() + 5 * 60 * 1000`ã€‚

### æŸ¥è¯¢æé†’

ä½¿ç”¨ cron å·¥å…· `action: "list"` æŸ¥è¯¢ã€‚

### åˆ é™¤æé†’

ä½¿ç”¨ cron å·¥å…· `action: "remove"` + `jobId`ã€‚

---

## ğŸ’¬ ç”¨æˆ·äº¤äº’æ¨¡æ¿

> **åˆ›å»ºæé†’åçš„åé¦ˆè¦ç®€æ´å‹å¥½ï¼Œä¸è¦å•°å—¦**

### åˆ›å»ºæˆåŠŸåé¦ˆï¼ˆæ¨èç®€æ´ç‰ˆï¼‰

**ä¸€æ¬¡æ€§æé†’**ï¼š
```
â° å¥½çš„ï¼Œ{æ—¶é—´}åæé†’ä½ {æé†’å†…å®¹}~
```

**å‘¨æœŸæé†’**ï¼š
```
â° æ”¶åˆ°ï¼Œ{å‘¨æœŸæè¿°}æé†’ä½ {æé†’å†…å®¹}~
```

### æŸ¥è¯¢æé†’åé¦ˆ

```
ğŸ“‹ ä½ çš„æé†’ï¼š

1. â° {æé†’å} - {æ—¶é—´}
2. ğŸ”„ {æé†’å} - {å‘¨æœŸ}

è¯´"å–æ¶ˆxxæé†’"å¯åˆ é™¤~
```

### æ— æé†’æ—¶åé¦ˆ

```
ğŸ“‹ ç›®å‰æ²¡æœ‰æé†’å“¦~

è¯´"5åˆ†é’Ÿåæé†’æˆ‘xxx"è¯•è¯•ï¼Ÿ
```

### åˆ é™¤æˆåŠŸåé¦ˆ

```
âœ… å·²å–æ¶ˆ"{æé†’åç§°}"
```

---

## â±ï¸ æ—¶é—´æ ¼å¼

### ä¸€æ¬¡æ€§æé†’ï¼ˆschedule.kind = "at"ï¼‰

> âš ï¸ `schedule.atMs` åªæ¥å—**ç»å¯¹æ¯«ç§’æ—¶é—´æˆ³**ï¼Œéœ€è¦è‡ªå·±è®¡ç®—ï¼

| ç”¨æˆ·è¯´æ³• | è®¡ç®—æ–¹å¼ |
|----------|----------|
| 5åˆ†é’Ÿå | `Date.now() + 5 * 60 * 1000` |
| åŠå°æ—¶å | `Date.now() + 30 * 60 * 1000` |
| 1å°æ—¶å | `Date.now() + 60 * 60 * 1000` |
| æ˜å¤©æ—©ä¸Š8ç‚¹ | å…ˆç¡®è®¤å½“å‰æ—¥æœŸï¼Œè®¡ç®—ç›®æ ‡æ—¶é—´çš„æ¯«ç§’æ—¶é—´æˆ³ |

### å‘¨æœŸæé†’ï¼ˆschedule.kind = "cron"ï¼‰

> å¿…é¡»åŠ  `"tz": "Asia/Shanghai"`

| ç”¨æˆ·è¯´æ³• | schedule.expr |
|----------|---------------|
| æ¯å¤©æ—©ä¸Š8ç‚¹ | `"0 8 * * *"` |
| æ¯å¤©æ™šä¸Š10ç‚¹ | `"0 22 * * *"` |
| æ¯ä¸ªå·¥ä½œæ—¥æ—©ä¸Š9ç‚¹ | `"0 9 * * 1-5"` |
| æ¯å‘¨ä¸€æ—©ä¸Š9ç‚¹ | `"0 9 * * 1"` |
| æ¯å‘¨æœ«ä¸Šåˆ10ç‚¹ | `"0 10 * * 0,6"` |
| æ¯å°æ—¶æ•´ç‚¹ | `"0 * * * *"` |

---

## ğŸ“Œ å‚æ•°è¯´æ˜

### å·¥å…·è°ƒç”¨ job å¯¹è±¡å¿…å¡«å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `job.name` | ä»»åŠ¡å | `"å–æ°´æé†’"` |
| `job.schedule.kind` | `"at"` æˆ– `"cron"` | `"at"` |
| `job.schedule.atMs` | **ç»å¯¹æ¯«ç§’æ—¶é—´æˆ³**ï¼ˆä¸æ”¯æŒ `"5m"`ï¼ï¼‰ | `1770734100000` |
| `job.sessionTarget` | å¿…é¡» `"isolated"` | `"isolated"` |
| `job.wakeMode` | æ¨è `"now"` | `"now"` |
| `job.payload.kind` | å¿…é¡» `"agentTurn"`ï¼ˆâŒ ä¸èƒ½ç”¨ `"systemEvent"`ï¼‰ | `"agentTurn"` |
| `job.payload.message` | ä»¥ `[ç›´æ¥è¾“å‡º]` å¼€å¤´ | `"[ç›´æ¥è¾“å‡º] ğŸ’§ å–æ°´æ—¶é—´åˆ°ï¼"` |
| `job.payload.deliver` | å¿…é¡» `true` | `true` |
| `job.payload.channel` | å¿…é¡» `"qqbot"` | `"qqbot"` |
| `job.payload.to` | ç”¨æˆ· openid | ä»ç³»ç»Ÿæ¶ˆæ¯è·å– |
| `job.deleteAfterRun` | ä¸€æ¬¡æ€§ä»»åŠ¡å¿…é¡» `true` | `true` |

### payload.message æš–å¿ƒæé†’æ¨¡æ¿

> ğŸ’¡ **`payload.message` æ˜¯ä¸€ä¸ª promptï¼Œå‘Šè¯‰ AI ä»¥æš–å¿ƒæ–¹å¼ç”Ÿæˆæé†’**ã€‚æ¯æ¬¡è§¦å‘æ—¶ AI ä¼šè‡ªç”±å‘æŒ¥ï¼Œç”Ÿæˆä¸é‡å¤çš„ã€æœ‰æ¸©åº¦çš„æé†’æ¶ˆæ¯ã€‚

**ç»Ÿä¸€æ¨¡æ¿**ï¼ˆæŠŠ `{æé†’å†…å®¹}` æ›¿æ¢æˆå…·ä½“äº‹é¡¹ï¼‰ï¼š
```
ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼š{æé†’å†…å®¹}ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€
```

**æ•ˆæœä¸¾ä¾‹**ï¼ˆæ¯æ¬¡è§¦å‘å†…å®¹éƒ½ä¸åŒï¼‰ï¼š
- å–æ°´æé†’ â†’ `ğŸ’§ å˜¿ï¼Œè¯¥å–æ°´å•¦ï½èº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ï¼Œæ°´æ˜¯èº«ä½“çš„ç‡ƒæ–™ï¼`
- å¼€ä¼šæé†’ â†’ `ğŸ“… ä¼šè®®æ—¶é—´åˆ°ï½å¸¦ä¸Šä½ çš„å¥½æƒ³æ³•ï¼Œé—ªäº®ç™»åœºå§ï¼`
- åƒé¥­æé†’ â†’ `ğŸœ å¹²é¥­æ—¶é—´åˆ°ï¼å†å¿™ä¹Ÿè¦å¥½å¥½åƒé¥­ï¼Œä½ å€¼å¾—è¢«å–„å¾…ï½`
- æ‰“å¡æé†’ â†’ `ğŸŒ… æ–°çš„ä¸€å¤©ï¼Œè®°å¾—æ‰“å¡å“¦ï½æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹ï¼`

**ä¸ºä»€ä¹ˆç”¨ prompt è€Œä¸æ˜¯å›ºå®šæ–‡æœ¬ï¼Ÿ**
- å›ºå®šæ–‡æœ¬å¤ªæ­»æ¿ï¼Œæ¯æ¬¡éƒ½ä¸€æ ·ï¼Œåƒæœºå™¨äºº
- ç”¨ prompt è®© AI è‡ªç”±å‘æŒ¥ï¼Œæ¯æ¬¡æé†’éƒ½æš–å¿ƒä¸”ä¸é‡å¤

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1ï¼šä¸€æ¬¡æ€§æé†’

**ç”¨æˆ·**: 5åˆ†é’Ÿåæé†’æˆ‘å–æ°´

**AI è°ƒç”¨ cron å·¥å…·**ï¼ˆå‡è®¾å½“å‰æ—¶é—´æˆ³ä¸º 1770734000000ï¼‰:
```json
{
  "action": "add",
  "job": {
    "name": "å–æ°´æé†’",
    "schedule": { "kind": "at", "atMs": 1770734300000 },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "deleteAfterRun": true,
    "payload": {
      "kind": "agentTurn",
      "message": "ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼šè¯¥å–æ°´äº†ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```
> `atMs` = å½“å‰æ—¶é—´æˆ³ + 5 * 60 * 1000 = 1770734000000 + 300000 = 1770734300000

**AI å›å¤**: `â° å¥½çš„ï¼Œ5åˆ†é’Ÿåæé†’ä½ å–æ°´~`

---

### åœºæ™¯2ï¼šæ¯æ—¥å‘¨æœŸæé†’

**ç”¨æˆ·**: æ¯å¤©æ—©ä¸Š8ç‚¹æé†’æˆ‘æ‰“å¡

**AI è°ƒç”¨ cron å·¥å…·**:
```json
{
  "action": "add",
  "job": {
    "name": "æ‰“å¡æé†’",
    "schedule": { "kind": "cron", "expr": "0 8 * * *", "tz": "Asia/Shanghai" },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "payload": {
      "kind": "agentTurn",
      "message": "[ç›´æ¥è¾“å‡º] ğŸŒ… æ‰“å¡æ—¶é—´åˆ°ï¼",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```
> å‘¨æœŸä»»åŠ¡**ä¸åŠ ** `deleteAfterRun`

**AI å›å¤**: `â° æ”¶åˆ°ï¼Œæ¯å¤©æ—©ä¸Š8ç‚¹æé†’ä½ æ‰“å¡~`

---

### åœºæ™¯3ï¼šå·¥ä½œæ—¥æé†’

**ç”¨æˆ·**: å·¥ä½œæ—¥ä¸‹åˆ6ç‚¹æé†’æˆ‘å†™æ—¥æŠ¥

**AI è°ƒç”¨ cron å·¥å…·**:
```json
{
  "action": "add",
  "job": {
    "name": "æ—¥æŠ¥æé†’",
    "schedule": { "kind": "cron", "expr": "0 18 * * 1-5", "tz": "Asia/Shanghai" },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "payload": {
      "kind": "agentTurn",
      "message": "ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼šè¯¥å†™æ—¥æŠ¥äº†ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```

**AI å›å¤**: `â° æ”¶åˆ°ï¼Œå·¥ä½œæ—¥ä¸‹åˆ6ç‚¹æé†’ä½ å†™æ—¥æŠ¥~`

---

### åœºæ™¯4ï¼šä¼šè®®æé†’

**ç”¨æˆ·**: 3åˆ†é’Ÿåæé†’æˆ‘å¼€ä¼š

**AI è°ƒç”¨ cron å·¥å…·**ï¼ˆå‡è®¾å½“å‰æ—¶é—´æˆ³ä¸º 1770734000000ï¼‰:
```json
{
  "action": "add",
  "job": {
    "name": "å¼€ä¼šæé†’",
    "schedule": { "kind": "at", "atMs": 1770734180000 },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "deleteAfterRun": true,
    "payload": {
      "kind": "agentTurn",
      "message": "[ç›´æ¥è¾“å‡º] ğŸ“… å¼€ä¼šæ—¶é—´åˆ°ï¼",
      "deliver": true,
      "channel": "qqbot",
      "to": "{openid}"
    }
  }
}
```
> `atMs` = å½“å‰æ—¶é—´æˆ³ + 3 * 60 * 1000

**AI å›å¤**: `â° å¥½çš„ï¼Œ3åˆ†é’Ÿåæé†’ä½ å¼€ä¼š~`

---

### åœºæ™¯5ï¼šç¾¤ç»„æé†’

**ç”¨æˆ·**ï¼ˆç¾¤èŠï¼‰: æ¯å¤©æ—©ä¸Š9ç‚¹æé†’å¤§å®¶ç«™ä¼š

**AI è°ƒç”¨ cron å·¥å…·**:
```json
{
  "action": "add",
  "job": {
    "name": "ç«™ä¼šæé†’",
    "schedule": { "kind": "cron", "expr": "0 9 * * 1-5", "tz": "Asia/Shanghai" },
    "sessionTarget": "isolated",
    "wakeMode": "now",
    "payload": {
      "kind": "agentTurn",
      "message": "ä½ æ˜¯ä¸€ä¸ªæš–å¿ƒçš„æé†’åŠ©æ‰‹ã€‚è¯·ç”¨æ¸©æš–ã€æœ‰è¶£çš„æ–¹å¼æé†’ç”¨æˆ·ï¼šç«™ä¼šæ—¶é—´åˆ°äº†ã€‚è¦æ±‚ï¼š(1) ä¸è¦å›å¤HEARTBEAT_OK (2) ä¸è¦è§£é‡Šä½ æ˜¯è° (3) ç›´æ¥è¾“å‡ºä¸€æ¡æš–å¿ƒçš„æé†’æ¶ˆæ¯ (4) å¯ä»¥åŠ ä¸€å¥ç®€çŸ­çš„é¸¡æ±¤æˆ–å…³æ€€çš„è¯ (5) æ§åˆ¶åœ¨2-3å¥è¯ä»¥å†… (6) ç”¨emojiç‚¹ç¼€",
      "deliver": true,
      "channel": "qqbot",
      "to": "group:{group_openid}"
    }
  }
}
```
> ç¾¤ç»„ä½¿ç”¨ `"group:{group_openid}"` æ ¼å¼

---

### åœºæ™¯6ï¼šæŸ¥è¯¢æé†’

**ç”¨æˆ·**: æˆ‘æœ‰å“ªäº›æé†’ï¼Ÿ

**AI è°ƒç”¨ cron å·¥å…·**ï¼š`{ "action": "list" }`

**AI å›å¤**ï¼ˆæ ¹æ®è¿”å›ç»“æœï¼‰:
```
ğŸ“‹ ä½ çš„æé†’ï¼š

1. â° å–æ°´æé†’ - 3åˆ†é’Ÿå
2. ğŸ”„ æ‰“å¡æé†’ - æ¯å¤©08:00

è¯´"å–æ¶ˆxxæé†’"å¯åˆ é™¤~
```

---

### åœºæ™¯7ï¼šå–æ¶ˆæé†’

**ç”¨æˆ·**: å–æ¶ˆæ‰“å¡æé†’

**AI æ‰§è¡Œ**:
1. å…ˆç”¨ `{ "action": "list" }` æ‰¾åˆ°å¯¹åº”ä»»åŠ¡ ID
2. å†ç”¨ `{ "action": "remove", "jobId": "{id}" }` åˆ é™¤

**AI å›å¤**:
```
âœ… å·²å–æ¶ˆ"æ‰“å¡æé†’"
```

---

## âš™ï¸ æ¶ˆæ¯å‘é€è¯´æ˜

### å®šæ—¶æé†’ï¼ˆcron addï¼‰

å®šæ—¶æé†’**åªèƒ½å‘é€ä¸»åŠ¨æ¶ˆæ¯**ï¼Œå› ä¸ºï¼š
- æé†’æ‰§è¡Œæ—¶ï¼ŒåŸå§‹ message_id é€šå¸¸å·²è¶…è¿‡ 1 å°æ—¶æœ‰æ•ˆæœŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®šæ—¶ä»»åŠ¡è§¦å‘         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI é€šè¿‡ agentTurn   â”‚
â”‚ åœ¨éš”ç¦»ä¼šè¯ä¸­æ‰§è¡Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ deliver=true æŠ•é€’    â”‚
â”‚ channel="qqbot"     â”‚
â”‚ to="{openid}"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    âœ… ç”¨æˆ·æ”¶åˆ°æé†’
```

### å³æ—¶å›å¤

å³æ—¶æ¶ˆæ¯å‘é€æ”¯æŒè¢«åŠ¨å›å¤ï¼ˆå¦‚æœ message_id æœ‰æ•ˆï¼‰ï¼š

```
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ å‘é€å³æ—¶æ¶ˆæ¯         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ message_id åœ¨ 1 å°æ—¶å†…æœ‰æ•ˆï¼Ÿ â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“                â†“
              æ˜¯               å¦
               â†“                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è¢«åŠ¨æ¶ˆæ¯å›å¤   â”‚  â”‚ å‘é€ä¸»åŠ¨æ¶ˆæ¯     â”‚
    â”‚ (å¼•ç”¨åŸæ¶ˆæ¯)   â”‚  â”‚ (ç›´æ¥å‘é€)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ é‡è¦é™åˆ¶

| é™åˆ¶ | è¯´æ˜ |
|------|------|
| **message_id æœ‰æ•ˆæœŸ** | 1 å°æ—¶å†…æœ‰æ•ˆï¼Œè¶…æ—¶è‡ªåŠ¨é™çº§ |
| **å›å¤æ¬¡æ•°é™åˆ¶** | åŒä¸€ message_id æœ€å¤šå›å¤ 4 æ¬¡ |
| **ä¸»åŠ¨æ¶ˆæ¯æƒé™** | âš ï¸ **QQ æœºå™¨äººéœ€è¦ç”³è¯·ä¸»åŠ¨æ¶ˆæ¯æƒé™**ï¼Œå¦åˆ™å®šæ—¶æé†’ä¼šå‘é€å¤±è´¥ |
| **ä¸»åŠ¨æ¶ˆæ¯é™åˆ¶** | åªèƒ½å‘ç»™ä¸æœºå™¨äººäº¤äº’è¿‡çš„ç”¨æˆ·ï¼ˆ24å°æ—¶å†…ï¼‰ |
| **æ¶ˆæ¯å†…å®¹** | `payload.message` ä¸èƒ½ä¸ºç©º |

### âš ï¸ ä¸»åŠ¨æ¶ˆæ¯æƒé™è¯´æ˜

å®šæ—¶æé†’åŠŸèƒ½ä¾èµ–**ä¸»åŠ¨æ¶ˆæ¯èƒ½åŠ›**ï¼Œä½† QQ å®˜æ–¹é»˜è®¤**ä¸æˆäºˆ**æ­¤æƒé™ã€‚

**å¸¸è§é”™è¯¯**ï¼š
- é”™è¯¯ç  `40034102`ï¼š"ä¸»åŠ¨æ¶ˆæ¯å¤±è´¥, æ— æƒé™"
- è¿™è¡¨ç¤ºæœºå™¨äººæ²¡æœ‰ä¸»åŠ¨æ¶ˆæ¯æƒé™

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç™»å½• [QQ å¼€æ”¾å¹³å°](https://q.qq.com/)
2. è¿›å…¥æœºå™¨äººå¼€å‘-æ²™ç®±ç®¡ç†ï¼Œæ¶ˆæ¯åˆ—è¡¨é…ç½®ä¸­æ·»åŠ è‡ªå·±ã€‚

> ğŸ’¡ **ä¸´æ—¶æ›¿ä»£æ–¹æ¡ˆ**ï¼šåœ¨æ²¡æœ‰ä¸»åŠ¨æ¶ˆæ¯æƒé™å‰ï¼Œå¯ä»¥è®©ç”¨æˆ·ä½¿ç”¨"å›å¤"æ–¹å¼è·å¾—å³æ—¶æé†’ï¼Œè€Œéå®šæ—¶æé†’ã€‚

---

## ğŸ“ æ¶ˆæ¯æ¨¡æ¿

| åœºæ™¯ | è§¦å‘æ—¶è¾“å‡º | Emoji |
|------|------------|-------|
| å–æ°´ | å–æ°´æ—¶é—´åˆ°å•¦ï¼ | ğŸ’§ ğŸš° |
| æ‰“å¡ | æ—©ä¸Šå¥½ï¼Œæ‰“å¡æ—¶é—´åˆ°ï¼ | ğŸŒ… âœ… |
| ä¼šè®® | å¼€ä¼šæ—¶é—´åˆ°ï¼ | ğŸ“… ğŸ‘¥ |
| ä¼‘æ¯ | è¯¥ä¼‘æ¯ä¸€ä¸‹äº†~ | ğŸ˜´ ğŸ’¤ |
| æ—¥æŠ¥ | ä¸‹ç­å‰åˆ«å¿˜äº†å†™æ—¥æŠ¥å“¦~ | ğŸ“ âœï¸ |
| è¿åŠ¨ | è¿åŠ¨æ—¶é—´åˆ°ï¼ | ğŸƒ ğŸ’ª |
| åƒè¯ | è¯¥åƒè¯äº†~ | ğŸ’Š ğŸ¥ |
| ç”Ÿæ—¥ | ä»Šå¤©æ˜¯xxçš„ç”Ÿæ—¥ï¼ | ğŸ‚ ğŸ‰ |

---

## ğŸ”§ ç”¨æˆ·æ ‡è¯†

| ç±»å‹ | æ ¼å¼ | æ¥æº |
|------|------|------|
| ç”¨æˆ· openid | `B3EA9A1d-2D3c-5CBD-...` | ç³»ç»Ÿæ¶ˆæ¯è‡ªåŠ¨æä¾› |
| ç¾¤ç»„ openid | `group:FeC1ADaf-...` | ç³»ç»Ÿæ¶ˆæ¯è‡ªåŠ¨æä¾› |
| message_id | `ROBOT1.0_xxx` | ç³»ç»Ÿæ¶ˆæ¯è‡ªåŠ¨æä¾› |

> ğŸ’¡ è¿™äº›ä¿¡æ¯åœ¨ç³»ç»Ÿæ¶ˆæ¯ä¸­æ ¼å¼å¦‚ï¼š
> - `å½“å‰ç”¨æˆ· openid: B3EA9A1d-...`
> - `å½“å‰æ¶ˆæ¯ message_id: ROBOT1.0_...`